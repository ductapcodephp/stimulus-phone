{% extends 'phone/layout.html.twig' %}

{% block title %}Lịch sử đơn hàng{% endblock %}

{% block content %}
    <link href="{{ asset('css/order.css') }}" rel="stylesheet">
    <section class="account-section" id="order-history">
        <div class="container">
            <h2 class="section-title fade-in">Quản Lý Tài Khoản</h2>
            <div class="account-content">
                <div class="account-sidebar fade-in" style="width: 300px;">
                    <h3>Menu</h3>
                    <ul>
                        <li><a href="{{ path('app_profile') }}">Thông Tin Cá Nhân</a></li>
                        <li><a href="{{ path('app_profile_order_history') }}" class="active">Lịch Sử Đơn Hàng</a></li>
                        <li><a href="{{ path('app_logout') }}" class="logout-button">Đăng Xuất</a></li>
                    </ul>
                </div>
                <div class="account-main fade-in">
                    <h3>Lịch Sử Đơn Hàng</h3>
                    <table class="order-table">
                        <thead>
                        <tr>
                            <th>Mã Đơn</th>
                            <th>Họ Tên</th>
                            <th>Email</th>
                            <th>Số Điện Thoại</th>
                            <th>Địa Chỉ</th>
                            <th>Trạng Thái</th>
                            <th>Ngày Đặt</th>
                            <th>Chi tiết</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for order in orders %}
                            <tr>
                                <td>#{{ order.id }}</td>
                                <td>{{ order.name }}</td>
                                <td>{{ order.email }}</td>
                                <td>{{ order.phone }}</td>
                                <td>{{ order.address }}</td>
                                <td><span class="order-status {{ order.status|lower == 'delivered' ? 'delivered' : (order.status|lower == 'pending' ? 'pending' : 'cancelled') }}">{{ order.status|default('Chưa cập nhật') }}</span></td>
                                <td>{{ order.createdAt ? order.createdAt|date('d/m/Y') : 'Chưa có' }}</td>
                                <td><a href="{{ path('detail_order_user', {'id': order.id}) }}" class="order-details-button">Xem Chi Tiết</a></td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="8">Bạn chưa có đơn hàng nào.</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
{% endblock %}